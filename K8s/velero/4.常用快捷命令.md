# 快速查看所有备份状态
velero backup get -o wide

# 查看最近备份
velero backup get --sort-by backupMetadata.creationTimestamp

# 删除所有失败的备份
velero backup get | grep Failed | awk '{print $1}' | xargs velero backup delete

# 恢复最新备份
LATEST=$(velero backup get --sort-by backupMetadata.creationTimestamp | tail -1 | awk '{print $1}')
velero restore create latest-restore --from-backup $LATEST

# 检查集群中所有命名空间的备份状态
for ns in $(kubectl get ns -o name | cut -d'/' -f2); do
  echo "=== Namespace: $ns ==="
  velero backup get --selector velero.io/namespace=$ns
done